<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Grimorio Prohibido Del Mal</title>

<style>
body{
margin:0;
background:#000;
color:white;
font-family:serif;
text-align:center;
}

h1{
font-size:55px;
text-shadow:0 0 25px purple;
}

button{
padding:15px 35px;
font-size:16px;
background:black;
border:3px solid magenta;
color:white;
cursor:pointer;
margin:10px;
transition:0.3s;
}

button:hover{
background:magenta;
color:black;
box-shadow:0 0 20px magenta;
}

}
.container{
display:flex;
justify-content:center;
gap:20px;
margin-top:40px;
flex-wrap:wrap;
}

.card{
width:180px;
height:260px;
border-radius:15px;
position:relative;
perspective:1000px; 
}

.card-inner{
position:relative;
width:100%;
height:100%;
transform-style:preserve-3d;
transition:0.3s;
}

.card.flipped .card-inner{
transform:rotateY(180deg);
}

.card-front{
position:absolute;
width:100%;
height:100%;
border-radius:15px;
background:#111;
display:flex;
justify-content:center;
align-items:center;
backface-visibility:hidden;
font-size:40px;
}

.card-back{
position:absolute;
width:100%;
height:100%;
border-radius:15px;
/* QUITA ESTA LINEA */
/* transform:rotateY(180deg); */
background:#222;
display:flex;
flex-direction:column;
justify-content:space-between;
align-items:center;
backface-visibility:hidden;
overflow:hidden;
}

/* SOLO cuando estÃ¡ dentro del sobre */
.card-inner .card-back{
transform: rotateY(180deg);
}

.img-carta{
width:100%;
height:85%;
object-fit:cover;
}

.rareza-label{
width:100%;
padding:5px;
font-weight:bold;
background:black;
}

.card.revealed.normal{ box-shadow:0 0 10px gray; }
.card.revealed.especial{ box-shadow:0 0 25px cyan; }
.card.revealed.raro{ box-shadow:0 0 30px blue; }
.card.revealed.legendaria{ box-shadow:0 0 45px gold; }
.card.revealed.maestra{ box-shadow:0 0 55px white; }
.card.revealed.dios{ box-shadow:0 0 70px red; } /* ARREGLADO */

.stack{
position:absolute;
top:5px;
left:5px;
font-size:12px;
background:black;
padding:2px 6px;
border-radius:5px;
}

.hidden{ display:none; }

.admin{
position:fixed;
bottom:10px;
right:10px;
}

.monedas{
position:fixed;
top:10px;
right:10px;
font-size:18px;
}
  .visor{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.8);
display:none;
justify-content:center;
align-items:center;
z-index:999;
}

.visor.activo{
display:flex; /* ðŸ‘ˆ SOLO cuando estÃ¡ activo */
}

.visor img{
max-width:90%;
max-height:90%;
border-radius:15px;
box-shadow:0 0 60px 20px gold;
}
/* =========================
ANIMACIÃ“N SOBRE Ã‰PICO
========================= */

@keyframes aparecerSobre {
0% { transform: scale(0.5); opacity:0; }
100% { transform: scale(1); opacity:1; }
}

@keyframes destelloMagico {
0% { box-shadow:0 0 0px purple; }
50% { box-shadow:0 0 80px 20px magenta; }
100% { box-shadow:0 0 0px purple; }
}

@keyframes cartaAparece {
0% { transform: scale(0) rotateY(180deg); opacity:0; }
100% { transform: scale(1) rotateY(180deg); opacity:1; }
}

@keyframes sacudir {
0% { transform: translateX(0); }
25% { transform: translateX(-10px); }
50% { transform: translateX(10px); }
75% { transform: translateX(-10px); }
100% { transform: translateX(0); }
}

/* Clase activadora */
.animar-sobre{
animation: aparecerSobre 0.5s ease;
}

.brillo-magico{
animation: destelloMagico 1s ease;
}

.carta-epica{
animation: cartaAparece 0.4s ease forwards;
}

.sacudida{
animation: sacudir 0.5s ease;
}

}  
/* =========================
EFECTOS NIVEL DIABLO
========================= */

@keyframes brilloLegendaria {
0% { box-shadow:0 0 10px gold; }
50% { box-shadow:0 0 80px 30px gold; }
100% { box-shadow:0 0 10px gold; }
}

@keyframes brilloMaestra {
0% { box-shadow:0 0 10px white; }
50% { box-shadow:0 0 90px 40px white; }
100% { box-shadow:0 0 10px white; }
}

@keyframes fondoRojoDios {
0% { background:#000; }
50% { background:#500; }
100% { background:#000; }
}

.legendaria-efecto{
animation: brilloLegendaria 1s ease;
}

.maestra-efecto{
animation: brilloMaestra 1s ease;
}

.fondo-dios{
animation: fondoRojoDios 0.6s ease;
}
/* =========================
   EFECTO 3D MAESTRA
========================= */

.card.maestra{
    perspective: 1000px;
}

.card.maestra .card-inner{
    transform-style: preserve-3d;
    transition: transform 0.2s ease;
}

.card.maestra .img-carta{
    transform: translateZ(40px);
    transition: transform 0.2s ease;
}

.card.maestra:hover .img-carta{
    transform: translateZ(70px) scale(1.05);
}

.card.maestra .rareza-label{
    transform: translateZ(20px);
}
</style> 
</head>
<body>

<div class="monedas">
ðŸ’° Monedas: <span id="monedas">0</span>
</div>

<div id="inicio">
<h1>ðŸ“– GRIMORIO PROHIBIDO ðŸ‘»</h1>
<button onclick="abrirSobre()">ABRIR SOBRE (10 ðŸ’°)</button>
<button onclick="verGrimorio()">VER GRIMORIO</button>
<br>
<button onclick="ganarMonedas()">âœ¨ GANAR MONEDAS</button>
</div>

<div id="sobre" class="hidden">
<h1>Abriendo Sobre</h1>
<div class="container" id="cartasContainer"></div>
<button onclick="abrirSobre()">ABRIR OTRO SOBRE (10 ðŸ’°)</button>
<button onclick="volverInicio()">â¬… Volver</button>
</div>

<div id="grimorio" class="hidden">
<h1>GRIMORIO PROHIBIDO</h1>
<h3 id="contador"></h3>

<h2 style="color:red; text-shadow:0 0 20px red;">ðŸ”¥ CARTAS DIOS ðŸ”¥</h2>
<div class="container" id="grimorioDios"></div>

<h2 style="margin-top:40px;">ðŸ“š RESTO DE CARTAS</h2>
<div class="container" id="grimorioContainer"></div>

<button onclick="volverInicio()">â¬… Volver</button>
</div>

<div class="admin hidden" id="adminPanel">
<button onclick="salirAdmin()">ðŸšª Salir Admin</button>
<button onclick="reiniciarTodo()">ðŸ§¹ Reset Datos</button>
</div>

<script>

 //*======Admin======*/

let grimorio = JSON.parse(localStorage.getItem("grimorio")) || {};
let monedas = parseInt(localStorage.getItem("monedas")) || 0;
let adminActivo = localStorage.getItem("adminActivo") === "true";

function guardar(){                                            //*====== Guardar ======*/
if(!adminActivo){
localStorage.setItem("monedas", monedas);
}
localStorage.setItem("grimorio", JSON.stringify(grimorio));
actualizarMonedas();
}

function actualizarMonedas(){                                      //*====== ActualizarMonedas ======*/
document.getElementById("monedas").innerText = adminActivo ? "âˆž" : monedas;
}

actualizarMonedas();
if(adminActivo){
document.getElementById("adminPanel").classList.remove("hidden");
}

/* =========================
CARTAS
========================= */
const cartas = [
/*normal*/
{ rareza:"normal", imagen:"img/911_normal.jpeg" },//
{ rareza:"normal", imagen:"img/aceite_bebe_normal.jpeg" },//
{ rareza:"normal", imagen:"img/bro_glen_normal.jpeg" },//
{ rareza:"normal", imagen:"img/gefe_de_maday_normal.jpeg" },//
{ rareza:"normal", imagen:"img/jorge_water_normal.jpeg" },//
{ rareza:"normal", imagen:"img/larios_normal.jpeg" },//
{ rareza:"normal", imagen:"img/maday_normal.jpeg" },//
{ rareza:"normal", imagen:"img/nata_normal.jpeg" },//
{ rareza:"normal", imagen:"img/sleeping_normal.jpeg" },//
{ rareza:"normal", imagen:"img/tienda_china_normal.jpeg" }, //
{ rareza:"normal", imagen:"img/clinton_normal.jpeg" },//
{ rareza:"normal", imagen:"img/glen_hat_normal.jpeg" }, //                 /*13*/
{ rareza:"normal", imagen:"img/cristo_normal.jpeg" },//
{ rareza:"normal", imagen:"img/glen_joker_normal.jpeg" },//
{ rareza:"normal", imagen:"img/glen_hood_normal.jpeg" },//
{ rareza:"normal", imagen:"img/clase_3as_normal.jpeg" },//
{ rareza:"normal", imagen:"img/julio_rizz_normal.jpeg" },  //
{ rareza:"normal", imagen:"img/joshua_hungry_normal.jpeg" },//
{ rareza:"normal", imagen:"img/charli_pelo_normal.jpeg" },//
{ rareza:"normal", imagen:"img/coach_sanmi_normal.jpeg" },//
{ rareza:"normal", imagen:"img/charly_sin_pelo_normal.jpeg" },//
{ rareza:"normal", imagen:"img/madahy_base_normal.jpeg" },//
{ rareza:"normal", imagen:"img/madahy_gord_normal.jpeg" },//
{ rareza:"normal", imagen:"img/migue_sueter_normal.jpeg" },//
{ rareza:"normal", imagen:"img/nata_staring_normal.jpeg" },//
{ rareza:"normal", imagen:"img/victor_sleeping_2_normal.jpeg" },//  
  
/*especial*/
{ rareza:"especial", imagen:"img/arabe_especial.jpeg" },//
{ rareza:"especial", imagen:"img/eucaliptos_especial.jpeg" },//
{ rareza:"especial", imagen:"img/hawking_especial.jpeg" },//
{ rareza:"especial", imagen:"img/hillary_especial.jpeg" },//
{ rareza:"especial", imagen:"img/maduro_especial.jpeg" },//                 /*6*/
{ rareza:"especial", imagen:"img/obama_especial.jpeg" },//
{ rareza:"especial", imagen:"img/69_especial.jpeg" },//
{ rareza:"especial", imagen:"img/alex_dormido_especial.jpeg" },
{ rareza:"especial", imagen:"img/chino_ass_especial.jpeg" },
{ rareza:"especial", imagen:"img/balon_voly_especial.jpeg" },
{ rareza:"especial", imagen:"img/migue_sonri_especial.jpeg" },//
  
  
/*rara*/
{ rareza:"raro", imagen:"img/isla_rara.jpeg" },//
{ rareza:"raro", imagen:"img/duo_dinamico_rara.jpeg" },//
{ rareza:"raro", imagen:"img/la_fortuna_rara.jpeg" },//
{ rareza:"raro", imagen:"img/marga_euca_rara.jpeg" },//
{ rareza:"raro", imagen:"img/marla_rara.jpeg" },//
{ rareza:"raro", imagen:"img/matriz_rara.jpeg" },//
{ rareza:"raro", imagen:"img/trump_rara.jpeg" },//                            /*9*/
{ rareza:"raro", imagen:"img/glen_rara.jpeg" },//
{ rareza:"raro", imagen:"img/arabe_mex_rara.jpeg" },//
{ rareza:"raro", imagen:"img/ball_crusher_rara.jpeg" },//
{ rareza:"raro", imagen:"img/cheche_base_rara.jpeg" },//
{ rareza:"raro", imagen:"img/fusion_josh_che_rara.jpeg" },//
{ rareza:"raro", imagen:"img/joshua_jefaso_rara.jpeg" },//
{ rareza:"raro", imagen:"img/nata_chilling_rara.jpeg" },//
  
  
  
/*legendaria*/
{ rareza:"legendaria", imagen:"img/epstein_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/67_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/fat_ass_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/pdiddy_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/profe_fisica_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/trum_clinton_legendaria.jpeg" },//           /*6*/
{ rareza:"legendaria", imagen:"img/chino_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/jack_fatass_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/marla_lengua_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/nata_cluas_legendaria.jpeg" },//
{ rareza:"legendaria", imagen:"img/victor_sleeping_legendaria.jpeg" },//
  
/*maestra*/
{ rareza:"maestra", imagen:"img/justin_maestra.jpeg" },//
{ rareza:"maestra", imagen:"img/manu_maestra.jpeg" },//
{ rareza:"maestra", imagen:"img/marga_working_maestra.jpeg" },//
{ rareza:"maestra", imagen:"img/papeles_epstein_maestra.jpeg" },//
{ rareza:"maestra", imagen:"img/pili_mili_maestra.jpeg" },//                  /*5*/
{ rareza:"maestra", imagen:"img/61_maestra.jpeg" },//
{ rareza:"maestra", imagen:"img/glen_mask_maestra.jpeg" },
{ rareza:"maestra", imagen:"img/glen_angry_maestra.jpeg" },
{ rareza:"maestra", imagen:"img/josh_pelon_maestra.jpeg" },
{ rareza:"maestra", imagen:"img/super_cheche_maestra.jpeg" },
{ rareza:"maestra", imagen:"img/kriko_sleeping_maestra.jpeg" },
{ rareza:"maestra", imagen:"img/micheal_guapo_maestra.jpeg" },
  

  
/* CARTA DIOS */
{ rareza:"dios", imagen:"img/chÃ¡velo_dios.jpeg" },//
{ rareza:"dios", imagen:"img/chÃ¡velo_brazo_izqui_dios.jpeg" },//
{ rareza:"dios", imagen:"img/chavelo_brazo_derech_dios.jpeg" },//
{ rareza:"dios", imagen:"img/chÃ¡velo_pie_derech_dios.jpeg" },//
{ rareza:"dios", imagen:"img/chÃ¡velo_pie_izqui_dios.jpeg" } //                  /*5*/

];
/* =========================
RAREZAS
========================= */

function generarRareza(){                             //*====== GenerarRareza ======*/

if(adminActivo){
let rarezas = ["dios","maestra","legendaria","raro","especial","normal"];
return rarezas[Math.floor(Math.random() * rarezas.length)];
}

let r=Math.random();

if(r < 0.0000001) return "dios";   // 0.00001%
if(r < 0.01) return "maestra";
if(r < 0.05) return "legendaria";
if(r < 0.20) return "raro";
if(r < 0.45) return "especial";
return "normal";
}

/*============== Ganar monedas ========*/
function ganarMonedas(){
if(adminActivo) return;
monedas += 1;
guardar();
}

/*====================== Abrir sobre =============*/
function abrirSobre(){

if(!adminActivo){
if(monedas < 10) return;
monedas -= 10;
guardar();
actualizarContador();
}

document.getElementById("inicio").classList.add("hidden");
document.getElementById("grimorio").classList.add("hidden");
document.getElementById("sobre").classList.remove("hidden");
let pantallaSobre = document.getElementById("sobre");
pantallaSobre.classList.add("animar-sobre");

setTimeout(()=>{
pantallaSobre.classList.remove("animar-sobre");
},500);

let container=document.getElementById("cartasContainer");
container.innerHTML="";

let generadas=[];

for(let i=0;i<5;i++){

let rareza=generarRareza();
let posibles=cartas.filter(c=>c.rareza===rareza);

if(posibles.length===0){
posibles=cartas.filter(c=>c.rareza==="normal");
}

let carta=posibles[Math.floor(Math.random()*posibles.length)];

if(!grimorio[carta.imagen]){
grimorio[carta.imagen]={...carta,cantidad:1};
}else{
grimorio[carta.imagen].cantidad++;
}

let div=document.createElement("div");
div.className="card";
/*=========== Como es la carta por frente, atras ==========*/
div.innerHTML=`
<div class="card-inner">
<div class="card-front">ð’…’</div>
<div class="card-back">
<img src="${carta.imagen}" class="img-carta"
onerror="console.error('No se encontrÃ³:', this.src); this.src='https://via.placeholder.com/180x220?text=Error'">
<div class="rareza-label">${carta.rareza.toUpperCase()}</div>
</div>
</div>
`;

container.appendChild(div);
generadas.push({element:div,rare:carta.rareza});
}

guardar();

generadas.forEach((carta,index)=>{
setTimeout(()=>{

carta.element.classList.add("flipped");
carta.element.classList.add("revealed");
carta.element.classList.add(carta.rare);

/* =========================
EFECTOS SEGÃšN RAREZA
========================= */

if(carta.rare === "legendaria"){
carta.element.classList.add("legendaria-efecto");

setTimeout(()=>{
carta.element.classList.remove("legendaria-efecto");
},1000);
}

if(carta.rare === "maestra"){
carta.element.classList.add("maestra-efecto");

setTimeout(()=>{
carta.element.classList.remove("maestra-efecto");
},1000);
}

if(carta.rare === "dios"){

/* Sacudida */
document.body.classList.add("sacudida");

setTimeout(()=>{
document.body.classList.remove("sacudida");
},500);

/* Fondo rojo */
document.body.classList.add("fondo-dios");

setTimeout(()=>{
document.body.classList.remove("fondo-dios");
},600);
}

},200*(index+1));
});

actualizarContador();

}

function actualizarContador(){

let total = 0;

for(let img in grimorio){
let existe = cartas.some(c => c.imagen === img);
if(existe) total++;
}

let contador = document.getElementById("contador");
if(contador){
contador.innerText = "Cartas Ãºnicas: " + total + " / " + cartas.length;
}
}

/*================== Es el grimorio de las cartas ============================*/

function verGrimorio(){

document.getElementById("inicio").classList.add("hidden");
document.getElementById("sobre").classList.add("hidden");
document.getElementById("grimorio").classList.remove("hidden");

let container=document.getElementById("grimorioContainer");
  let containerDios=document.getElementById("grimorioDios");
containerDios.innerHTML="";
container.innerHTML="";

let total=0;

for(let img in grimorio){
    // SOLO contar si la carta aÃºn existe en el array actual  //
let existe = cartas.some(c => c.imagen === img);
if(!existe) continue;

total++;
let c=grimorio[img];

let div=document.createElement("div");
div.className="card revealed "+c.rareza;

div.innerHTML=`
<div class="card-back">
<div class="stack">x${c.cantidad}</div>
<img src="${c.imagen}" 
class="img-carta" 
onclick="verCartaGrande('${c.imagen}')"
onerror="this.src='https://via.placeholder.com/180x220?text=No+Image'">
<div class="rareza-label">${c.rareza.toUpperCase()}</div>
</div>
`;

if(c.rareza === "dios"){
    containerDios.appendChild(div);
}else{
    container.appendChild(div);
}
/* Forzar que estÃ© volteada */
setTimeout(()=>{
    div.classList.add("flipped");
},10);
}

document.getElementById("contador").innerText=
"Cartas Ãºnicas: "+total+" / "+cartas.length;
}
function verCartaGrande(src){     /*================VerCartaGrande====================*/
console.log("CLICK EN CARTA:", src); /*temporal*/
let visor = document.getElementById("visorCarta");
let img = document.getElementById("imagenGrande");

img.src = src;
visor.classList.add("activo");
}

function cerrarVisor(){
document.getElementById("visorCarta").classList.remove("activo");
}
    
// ========================================salir admin
function salirAdmin(){
adminActivo = false;
localStorage.setItem("adminActivo","false");
actualizarMonedas();
document.getElementById("adminPanel").classList.add("hidden");
}

 function desbloquearTodas(){
for(let carta of cartas){

if(!grimorio[carta.imagen]){
grimorio[carta.imagen] = {
imagen: carta.imagen,
rareza: carta.rareza,
cantidad: 1
};
}
}
guardar();
actualizarContador();
}

function volverInicio(){   /*====================volver inicio=====================================*/
document.getElementById("sobre").classList.add("hidden");
document.getElementById("grimorio").classList.add("hidden");
document.getElementById("inicio").classList.remove("hidden");
}

/* =========================
   RESET ADMIN
========================= */

function reiniciarTodo(){   /*=================== Reiniciar todo ================*/

let password = prompt("Ingrese contraseÃ±a de administrador:");

if(password === "Adame123"){
grimorio = {};
monedas = 0;
adminActivo = false;
localStorage.clear();
location.reload();
}
}

/* =========================
   ACTIVAR ADMIN
========================= */

let secreto="adameadmin";
let buffer="";

document.addEventListener("keydown",function(e){
buffer+=e.key.toLowerCase();
if(buffer.length>secreto.length){
buffer=buffer.slice(-secreto.length);
}
if(buffer===secreto){
adminActivo = true;
localStorage.setItem("adminActivo","true");
document.getElementById("adminPanel").classList.remove("hidden");
actualizarMonedas();
 desbloquearTodas(); //
buffer="";
}
});

document.addEventListener("mousemove", function(e){

    document.querySelectorAll("#sobre .card.maestra.flipped").forEach(card => {

        let rect = card.getBoundingClientRect();
        let x = e.clientX - rect.left;
        let y = e.clientY - rect.top;

        let inner = card.querySelector(".card-inner");
        if(!inner) return;

        if(x > 0 && x < rect.width && y > 0 && y < rect.height){

            let rotateY = ((x / rect.width) - 0.5) * 15;
            let rotateX = ((y / rect.height) - 0.5) * -15;

            inner.style.transform =
                `rotateY(180deg) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;

        }else{
            inner.style.transform = "rotateY(180deg)";
        }

    });

});

  
</script>  
  
 <div id="visorCarta" class="visor" onclick="cerrarVisor()">
    <img id="imagenGrande">
</div>
  
</body>
</html>
